{"mappings":"siBAAAA,EAAiBC,KAAKC,MAAM,+bCIlBC,WAEN,MAAMC,EAA+B,wBAAtBC,SAASC,SAExB,IAAIC,EAAGC,EAEPC,QAAQC,IAAI,WAAYN,GAErBA,GACCG,EAAII,OAAOC,cAAcC,SACzBL,QAAcD,EAAEO,IAAIC,EAAAC,QAAYC,MAAMC,MAAOH,EAAAC,QAAYG,WAAWC,OAAQL,EAAAC,QAAYK,IAAIC,sBAC5Fb,QAAQC,IAAI,UAAWF,IAEvBA,EAAQ,CACJe,GAAI,UACJC,KAAM,UACNC,MAAO,6BAIf,MAAMC,EAAarB,SAASsB,eAAe,WAErCC,EAAWC,EAAA7B,GAAK8B,QAAQC,MAAKC,GAAKA,EAAET,KAAOf,EAAMe,KAgBjDO,EAAUD,EAAA7B,GAAK8B,QAAQG,KAAID,GAEvB,yCAGTA,EAAAT,yBAAAS,EAAAT,KAAAK,EAAAL,GAAA,IAAA,oBAAAS,EAAAP,iDAKDC,EAAWQ,UAAWJ,EAASK,KAAA,IAE/B1B,QAAAC,IAAW,cAAgBgB,WACnBhB,IAAA,WAAgBoB,2CACvBM,EAAAC,iBAAA,SAAAC,GA5BiBnC,OAAUmC,EAAGf,KAE3B,IAAInB,EAAQ,OAAOK,QAAQC,IAAIa,GAE/B,MAAMgB,EAAQxB,EAAAC,QAAYC,MAAMC,MAC1BsB,EAAazB,EAAAC,QAAYG,WAAWC,OACpCqB,EAAM1B,EAAAC,QAAYK,IAAIC,2BAEtBf,EAAEmC,IAAIH,EAAOC,EAAYC,EAAKT,GACpC,MAAMW,QAAiBpC,EAAEO,IAAIyB,EAAOC,EAAYC,GAChDhC,QAAQC,IAAI,wBAA0BiC,IAkBzCC,CAAAN,EAAAF,EAAAb","sources":["src/api/data/authors.json","src/popups/board-buttons-popup-authors.js"],"sourcesContent":["{\n    \"authors\": [\n        {\n            \"id\": \"rtw\",\n            \"name\": \"ResponsibleTech.Work\",\n            \"title\": \"ResponsibleTech.Work Pledges\"\n        },\n        {\n            \"id\": \"spotify\",\n            \"name\": \"Spotify\",\n            \"title\": \"Spotify Ethics Assessment\"\n        },\n        {\n            \"id\": \"swm\",\n            \"name\": \"Sustainable Web Manifesto\",\n            \"title\": \"Sustainable Web Manifesto\"\n        },\n        {\n            \"id\": \"pg\",\n            \"name\": \"Principles.Green\",\n            \"title\": \"Principles of Green Software Engineering\"\n        },\n        {\n            \"id\": \"princeton\",\n            \"name\": \"Princeton web transparency\",\n            \"title\": \"Dark Patterns at Scale\"\n        }\n    ]\n}","import regeneratorRuntime from \"regenerator-runtime\";\nimport data from '../api/data/authors.json';\nimport trelloEnums from '../shared/trello-enums';\n\nconst init = async () => {\n\n    const isLive = document.referrer === 'https://trello.com/';\n\n    let t, prefs;\n\n    console.log('isLive: ', isLive);\n\n    if(isLive) {\n        t = window.TrelloPowerUp.iframe();\n        prefs = await t.get(trelloEnums.Scope.Board, trelloEnums.Visibility.Shared, trelloEnums.Key.ChallengePreferences);\n        console.log('prefs: ', prefs);\n    } else {\n        prefs = {\n            id: \"spotify\",\n            name: \"Spotify\",\n            title: \"Spotify Ethics Assessment\"\n        };\n    }\n\n    const authorList = document.getElementById('authors');\n\n    const selected = data.authors.find(a => a.id === prefs.id);\n\n    const selectAuthor = async (e, id) => {\n\n        if(!isLive) return console.log(id);\n\n        const scope = trelloEnums.Scope.Board;\n        const visibility = trelloEnums.Visibility.Shared;\n        const key = trelloEnums.Key.ChallengePreferences;\n\n        await t.set(scope, visibility, key, a);\n        const response = await t.get(scope, visibility, key);\n        console.log('return saved author: ',  response);\n\n    };\n        \n    const authors = data.authors.map(a => {\n\n        return `<li>\n                    <button id=\"${a.id}\" class=\"btn\"><span>${a.id === selected.id ? '*' : '-' }</span> <span>${a.title}</span></button>\n                </li>`;\n    });\n\n    authorList.innerHTML = authors.join('');\n\n    console.log('authorList ', authorList);\n    console.log('authors ', authors);\n\n    authorList.querySelectorAll('.btn').forEach(btn => {\n        btn.addEventListener('click', e => selectAuthor(e, btn.id));\n    });\n};\n\ninit();"],"names":["$f50b6bdb824df028$exports","JSON","parse","async","isLive","document","referrer","t","prefs","console","log","window","TrelloPowerUp","iframe","get","$LdkDU","default","Scope","Board","Visibility","Shared","Key","ChallengePreferences","id","name","title","authorList","getElementById","selected","$parcel$interopDefault","authors","find","a","map","innerHTML","join","btn","addEventListener","e","scope","visibility","key","set","response","selectAuthor"],"version":3,"file":"board-buttons-popup-authors.e4b49d9c.js.map"}