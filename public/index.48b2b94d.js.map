{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1cba84badefa0144.js","src/api/data/authors.json","src/capabilities/board-buttons.js","src/capabilities/card-badges.js","src/capabilities/card-buttons.js","src/api/enums.js","node_modules/@parcel/runtime-js/lib/runtime-55e5ebecc04afa50.js","node_modules/@parcel/runtime-js/lib/runtime-237fb8d62ddb295a.js","node_modules/@parcel/runtime-js/lib/runtime-9b045f6875d19687.js","node_modules/@parcel/runtime-js/lib/runtime-975a9087b41bd714.js","node_modules/@parcel/runtime-js/lib/runtime-3a2c65592369123b.js","node_modules/@parcel/runtime-js/lib/runtime-dc6733200bf4e468.js","src/api/api.js","src/shared/capability-selector.js","src/capabilities/card-detail-badges.js","src/js/connector.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2JFQr\\\":\\\"index.48b2b94d.js\\\",\\\"bJmGX\\\":\\\"rtw.db725a81.js\\\",\\\"7WKo9\\\":\\\"rtw-trello.edaa1442.js\\\",\\\"cX2tx\\\":\\\"spotify.1e0f0708.js\\\",\\\"irEM1\\\":\\\"spotify-trello.00774160.js\\\",\\\"2Ywgl\\\":\\\"swm.415b8913.js\\\",\\\"cHbDk\\\":\\\"princeton.82973572.js\\\",\\\"kzChq\\\":\\\"index.b7389a8e.js\\\"}\"));","{\n    \"authors\": [\n        {\n            \"id\": \"rtw\",\n            \"name\": \"ResponsibleTech.Work\",\n            \"title\": \"ResponsibleTech.Work Pledges\"\n        },\n        {\n            \"id\": \"spotify\",\n            \"name\": \"Spotify\",\n            \"title\": \"Spotify Ethics Assessment\"\n        },\n        {\n            \"id\": \"swm\",\n            \"name\": \"Sustainable Web Manifesto\",\n            \"title\": \"Sustainable Web Manifesto\"\n        },\n        {\n            \"id\": \"pg\",\n            \"name\": \"Principles.Green\",\n            \"title\": \"Principles of Green Software Engineering\"\n        },\n        {\n            \"id\": \"princeton\",\n            \"name\": \"Princeton web transparency\",\n            \"title\": \"Dark Patterns at Scale\"\n        }\n    ]\n}","import trelloEnums from '../shared/trello-enums';\n\nimport ChallengeLog from '../shared/challenge-log';\n\nimport data from '../api/data/authors.json';\n\nconst GRAY_ICON = 'https://cdn.hyperdev.com/us-east-1%3A3d31b21c-01a0-4da2-8827-4bc6e88b7618%2Ficon-gray.svg';\nconst BLACK_ICON = 'https://cdn.hyperdev.com/us-east-1%3A3d31b21c-01a0-4da2-8827-4bc6e88b7618%2Ficon-black.svg';\nconst WHITE_ICON = 'https://cdn.hyperdev.com/us-east-1%3A3d31b21c-01a0-4da2-8827-4bc6e88b7618%2Ficon-white.svg';\n\nconst get = async t => {\n\n    const scope = trelloEnums.Scope.Board;\n    const visibility = trelloEnums.Visibility.Shared;\n    const key = trelloEnums.Key.ChallengePreferences;\n    const capability = trelloEnums.Capability.BoardButtons;\n\n    const onBtnClick = async t => {\n\n        const prefs = await t.get(trelloEnums.Scope.Board, trelloEnums.Visibility.Shared, trelloEnums.Key.ChallengePreferences);\n        const selected = data.authors.find(a => a.id === prefs.id);\n        \n        const preferences = data.authors.map(a => {\n            return {\n                icon: selected.id === prefs.id ? BLACK_ICON : GRAY_ICON,\n                text: a.title,                \n                callback: async (t, opts) => {\n                    await t.set(scope, visibility, key, a);\n                    const response = await t.get(scope, visibility, key);\n                    console.log('return saved author: ',  response);\n                }\n            }\n        });\n    \n        console.log('selected: ', selected);\n        console.log('prefs: ', prefs);\n\n        return t.popup({\n            title: 'Toolbox preferences',\n            items: preferences\n        });\n    };\n\n    return [{\n        text: 'Challenge Toolbox',\n        callback: t => onBtnClick(t),\n        condition: trelloEnums.Condition.Always\n      }];\n\n};\n\nexport const getBoardButtons = (t, opts) => {\n    return get(t);\n}","import trelloEnums from '../shared/trello-enums';\n\nimport ChallengeLog from '../shared/challenge-log';\n\nconst get = async t => {\n\n    const scope = trelloEnums.Scope.Card;\n    const visibility = trelloEnums.Visibility.Shared;\n    const key = trelloEnums.Key.LogEntries;\n    const capability = trelloEnums.Capability.CardBadges;\n\n    const log = await t.get(scope, visibility, key);\n\n    console.log(`Data stored for ${key} against ${scope} with ${visibility} access for ${capability}  : `,  log);\n\n    const context = t.getContext();\n\n    console.log('Context for card badges: ', context);\n\n    const { challenges, celebrations } = ChallengeLog.getChallengeBadgeCounts(context, log);\n\n    const challengeText = ChallengeLog.getButtonText(trelloEnums.Type.Challenge, challenges);\n    const celebrateText = ChallengeLog.getButtonText(trelloEnums.Type.Celebrate, celebrations);\n\n    console.log(`Current value for ${key} for card-badges`,  log);\n\n    // check for card in log - if there's a match return challenges, celebrations, both or neither\n    // match count agsainst specific card\n\n    if(challenges === 0 && celebrations === 0) return [];\n\n    const badges = [\n        {\n            text: challengeText,\n            color: \"red\"\n        },\n        {\n            text: celebrateText,\n            color: \"green\"\n        },\n    ];\n\n    const badgeArray = [];\n    \n    if(challenges !== 0) {\n        badgeArray.push(badges[0]);\n    } if(challenges !== 0) {\n        badgeArray.push(badges[1]);\n    }\n\n    return t\n    .card('id', 'name')            \n    .then(function (card) {\n        return badgeArray;\n    });\n};\n\nexport const getCardBadges = (t, opts) => {\n    return get(t);\n}","import trelloEnums from '../shared/trello-enums';\n\nimport ChallengeLog from '../shared/challenge-log';\n\nconst GRAY_ICON = 'https://cdn.hyperdev.com/us-east-1%3A3d31b21c-01a0-4da2-8827-4bc6e88b7618%2Ficon-gray.svg';\n\nconst get = async t => {\n\n    const scope = trelloEnums.Scope.Card;\n    const visibility = trelloEnums.Visibility.Shared;\n    const key = trelloEnums.Key.LogEntries;\n    const capability = trelloEnums.Capability.CardButtons;\n\n    const log = await t.get(scope, visibility, key);\n\n    console.log(`Data stored for ${key} against ${scope} with ${visibility} access for ${capability}  : `,  log);\n\n    const context = t.getContext();\n\n    console.log('Context for card badges: ', context);\n\n    const { challenges, celebrations } = ChallengeLog.getChallengeBadgeCounts(context, log);\n\n    const challengeText = ChallengeLog.getButtonText(trelloEnums.Type.Challenge, challenges);\n    const celebrateText = ChallengeLog.getButtonText(trelloEnums.Type.Celebrate, celebrations);\n\n    const onCloseChallengToolbox = t => {\n        console.log('onCloseChallengToolbox');\n    };\n\n    const card = await t.card('name').get('name');\n\n    console.log('card: ', JSON.stringify(card, null, 2));\n\n    return [\n        {\n            icon: GRAY_ICON,\n            text: challengeText,\n            condition: trelloEnums.Condition.Always,\n            callback: function(t){\n                return t.modal({\n                    title: \"Challenge\",                    \n                    args: { type: trelloEnums.Type.Challenge },\n                    url: './modals/challenge.html',\n                    fullscreen: false,\n                    height: 500,                    \n                    callback: onCloseChallengToolbox,\n                });\n            }\n        },      \n        {\n            icon: GRAY_ICON,\n            text: celebrateText,\n            condition: trelloEnums.Condition.Always,\n            callback: function(t){\n                return t.modal({\n                    title: \"Celebrate\",\n                    args: { type: trelloEnums.Type.Celebrate },\n                    url: './modals/celebrate.html',\n                    fullscreen: false,\n                    height: 500\n                });\n            }\n        }\n    ];\n};    \n\nexport const getCardButtons = (t, opts) => {\n    return get(t);\n}","const Authors = Object.freeze({\n    RTW: 'rtw',\n    Spotify: 'spotify',\n    SWM: \"swm\",\n    PrinciplesGreen: \"pg\",\n    Princeton: \"princeton\"\n});\n\nconst Environments = Object.freeze({\n    Trello: 'Trello'\n});\n\nconst enums = {\n    Authors,\n    Environments\n};\n\nexport default enums;","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"bJmGX\"))).then(() => parcelRequire('b6NUa'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"7WKo9\"))).then(() => parcelRequire('bEksa'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"cX2tx\"))).then(() => parcelRequire('bmO0s'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"irEM1\"))).then(() => parcelRequire('f1e8W'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"2Ywgl\"))).then(() => parcelRequire('ffvez'));","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"cHbDk\"))).then(() => parcelRequire('epFvb'));","import enums from './enums';\n\nconst getTrelloData = async author => {\n\n    const id = author.id;\n\n    return await getAuthorDataById(id);\n\n};\n\nconst getAuthorDataById = async id => {\n\n    let data, trelloData;\n    \n    return (async () => {\n        switch(id) {\n            case enums.Authors.RTW:\n                data = await import('./data/rtw.json');\n                trelloData = await import('./data/rtw-trello.json');\n                return { ...data, ...trelloData };\n            case enums.Authors.Spotify:\n                data = await import('./data/spotify.json');\n                trelloData = await import('./data/spotify-trello.json');\n                return { ...data, ...trelloData };\n            case enums.Authors.SWM:\n                data = await import('./data/swm.json');\n                return { ...data, ...trelloData };\n            case enums.Authors.Princeton:\n                data = await import('./data/princeton.json');\n                return { ...data, ...trelloData };\n        }\n    })();\n};\n\nconst api = {\n    getTrelloData,\n    getAuthorDataById\n};\n\nexport default api;","import regeneratorRuntime from \"regenerator-runtime\";\nimport ChallengeLog from '../shared/challenge-log';\nimport trelloEnums from '../shared/trello-enums';\nimport api from '../api/api';\n\nconst getData = async prefs => {\n    return await api.getAuthorDataById(prefs.id);\n};\n\nconst getCapabilityPreferences = (data, capability) => {\n    \n    const capabilities = data.capabilities;\n    const capabilitySelection = capabilities.find(c => c.capability === capability);\n\n    if(capabilitySelection && capabilitySelection.enabled) {\n        return capabilitySelection.labels;\n    } else {\n        return [];\n    }\n};\n\nconst onLabelForPopupClick = (t, context, popup) => {\n    \n    return t.popup({\n        title: popup.prompt,\n        items: popup.effects\n    });\n\n    // click events missing …\n};\n\nconst onLabelForActionClick = async (t, context, pledge) => {\n\n    const challengeLog = new ChallengeLog();\n    \n    const { isPledgeNowLogged, updatedPledges } = challengeLog.togglePledge(context, pledge);\n\n    await t.set(scope, visibility, key, updatedPledges); // pass func to mock\n    return await t.get(scope, visibility, key);\n\n    // update label in situ after click?\n};\n\nconst getTrelloLabels = async ({pledges, log, context, popup = null}) => {\n\n    console.log('getTrelloLabels log: ', log);\n\n    return popup \n            ? pledges.map(pledge => {\n                return {\n                    text: `${pledge.text} ${ChallengeLog.getCustomBadgeCounts(context, log, pledge)}`,\n                    condition: trelloEnums.Condition.Always,\n                    callback: t => onLabelForPopupClick(t, context, popup)\n                }\n            })\n            : pledges.map(pledge => {\n                return {\n                    text: pledge.text,\n                    condition: trelloEnums.Condition.Always,\n                    callback: t => onLabelForActionClick(t, context, pledge)\n                }\n            });\n};\n\nconst getPopup = async data => {\n    \n    const popup = data.popup;\n\n    if(!popup || (popup && !popup.enabled)) return null;\n\n    return popup;\n}\n\nconst selector = {\n    getData,\n    getCapabilityPreferences,\n    getTrelloLabels,\n    getPopup\n}\n\nexport default selector;","import trelloEnums from '../shared/trello-enums';\nimport selector from '../shared/capability-selector';\n\nconst get = async t => {\n\n    const context = t.getContext();\n    const logEntries = await t.get(trelloEnums.Scope.Card, trelloEnums.Visibility.Shared, trelloEnums.Key.LogEntries);\n\n    let log;\n\n    if(logEntries && logEntries !== undefined) {\n        log = challengeLog.setLog(logEntries);\n    }\n    \n    const prefs = await t.get(trelloEnums.Scope.Board, trelloEnums.Visibility.Shared, trelloEnums.Key.ChallengePreferences);\n    const data = await selector.getData(prefs);\n\n    const pledges = await selector.getCapabilityPreferences(data, trelloEnums.Capability.CardDetailBadges);\n    const labels = await selector.getTrelloLabels({pledges, log, context: {board: context.board, card: context.card, member: context.member}});\n\n    return labels;\n};    \n\nexport const getCardDetailBadges = (t, opts) => {\n    return get(t);\n}","import { getBoardButtons } from \"../capabilities/board-buttons\";\nimport { getCardBadges } from \"../capabilities/card-badges\";\nimport { getCardButtons } from \"../capabilities/card-buttons\";\nimport { getCardDetailBadges } from \"../capabilities/card-detail-badges\";\n\nwindow.TrelloPowerUp.initialize({\n\n    \"board-buttons\": (t, opts) => getBoardButtons(t, opts),\n    \"card-badges\": (t, opts) => getCardBadges(t, opts),\n    'card-buttons': (t, opts) => getCardButtons(t, opts),\n    'card-detail-badges': (t, opts) => getCardDetailBadges(t, opts),\n\n});"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$f50b6bdb824df028$exports","$56c9c886f2e8eba6$var$get","async","t","scope","$LdkDU","default","Scope","Board","visibility","Visibility","Shared","key","Key","ChallengePreferences","Capability","BoardButtons","text","callback","prefs","get","selected","$parcel$interopDefault","authors","find","a","preferences","map","icon","title","opts","set","response","console","log","popup","items","onBtnClick","condition","Condition","Always","$2db22ad5133da2c5$export$c73bb284c898a327","Card","LogEntries","capability","CardBadges","context","getContext","challenges","celebrations","$BvQ1f","getChallengeBadgeCounts","challengeText","getButtonText","Type","Challenge","celebrateText","Celebrate","badges","color","badgeArray","push","card","then","$2db22ad5133da2c5$var$get","$ffcb280b61afb824$export$79f535b67280aad0","CardButtons","onCloseChallengToolbox","stringify","modal","args","type","url","fullscreen","height","$ffcb280b61afb824$var$get","$07f1dab97776ed9a$export$2e2bcd8739ae039","freeze","RTW","Spotify","SWM","PrinciplesGreen","Princeton","Trello","module","exports","import","resolve","$0d2d75f2a4f26470$var$getAuthorDataById","data","trelloData","Authors","$0d2d75f2a4f26470$export$2e2bcd8739ae039","author","$2e4141f889ef1b6d$export$2e2bcd8739ae039","getAuthorDataById","capabilitySelection","capabilities","c","enabled","labels","pledges","pledge","getCustomBadgeCounts","prompt","effects","$2e4141f889ef1b6d$var$onLabelForPopupClick","challengeLog","isPledgeNowLogged","updatedPledges","togglePledge","$2e4141f889ef1b6d$var$onLabelForActionClick","$c8e855563fa8e8ac$export$f01c584eba1b8a62","logEntries","undefined","setLog","getData","getCapabilityPreferences","CardDetailBadges","getTrelloLabels","board","member","$c8e855563fa8e8ac$var$get","window","TrelloPowerUp","initialize"],"version":3,"file":"index.48b2b94d.js.map"}